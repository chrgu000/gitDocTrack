<?xml version="1.0" encoding="UTF-8"?>
<definitions xmlns="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:activiti="http://activiti.org/bpmn" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:omgdc="http://www.omg.org/spec/DD/20100524/DC" xmlns:omgdi="http://www.omg.org/spec/DD/20100524/DI" xmlns:tns="http://www.activiti.org/test" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" expressionLanguage="http://www.w3.org/1999/XPath" name="" targetNamespace="http://www.activiti.org/test" typeLanguage="http://www.w3.org/2001/XMLSchema">


<processid="joinProcess"name="Join process"isExecutable="true">


<startEventid="startevent1"name="Start">


<extensionElements>


<activiti:formPropertyid="personId"name="person id"


type="long"required="true"></activiti:formProperty>


<activiti:formPropertyid="compId"name="company Id"


type="long"required="true"></activiti:formProperty>

</extensionElements>

</startEvent>


<endEventid="endevent1"name="End"></endEvent>


<userTaskid="ApprovalTask"name="Approval Task"


activiti:candidateUsers="${joinService.findUsers(execution)}"isForCompensation="true">


<extensionElements>


<activiti:formPropertyid="joinApproved"name="Join Approved"


type="enum">


<activiti:valueid="true"name="Approve"></activiti:value>


<activiti:valueid="false"name="Reject"></activiti:value>

</activiti:formProperty>

</extensionElements>

</userTask>


<sequenceFlowid="flow1"sourceRef="startevent1"targetRef="ApprovalTask"></sequenceFlow>


<serviceTaskid="AutoTask"name="Auto Task"


activiti:expression="${joinService.joinGroup(execution)}"></serviceTask>


<sequenceFlowid="flow2"sourceRef="ApprovalTask"targetRef="AutoTask"></sequenceFlow>


<sequenceFlowid="flow3"sourceRef="AutoTask"targetRef="endevent1"></sequenceFlow>

</process>
</definitions>